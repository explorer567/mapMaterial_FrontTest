<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./leaflet.css" />
    <script src="./leaflet.js"></script>
    <script src="../hangzhou.js"></script>
    <style>
      #map {
        width: 100%;
        height: 100vh;
        position: absolute;
        left: 0;
        top: 0;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
  </body>
  <script>
    const map = new L.map("map", {
      center: [29.4234234, 120.646456],
      zoom: 8,
      crs: L.CRS.EPSG4326,
    });
    const layer = L.geoJson(hangzhou, {
      onEachFeature: (f, l) => {
        //f表示每一个要素，l表示整个图层
        l.on({
          //监听图层的点击事件
          click: (e) => {
            //e.target.feature表示当前鼠标点击后获取到的要素
            console.log(e.target);
            var popup = L.popup()
              .setLatLng([e.latlng.lat, e.latlng.lng])
              .setContent(e.target.feature.properties.name)
              .openOn(map);
          },
        });
      },
    });
    layer.addTo(map);
    map.fitBounds(layer.getBounds());
  </script>
</html>
